<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Project 1</title>
        <script src='../d3.js' type="text/javascript"></script>
    </head>
    <body>
        <h1>Project 1</h1>
        <script type="text/javascript">
            d3.select('body').append('p').text('Hello world!');

            var rowConverter = function(d){
                return {
                    variety: d.variety,
                    sepalWidth: parseFloat(d['sepal width']),
                    petalLengh: parseFloat(d['petal length']),
                    petalWidth: parseFloat(d['petal width']),
                    sepalLength: parseFloat(d['sepal length'])
                };
            };
          
            var dataset;

            var buildParas = function(){
                d3.selectAll('p')
                  .data(dataset)
                  .enter()
                  .append('p')
                  .text(function(d){return d.variety + ' ' + d.sepalWidth;})
                  .style("color", function(d){
                      if(d.sepalWidth > 3){
                          return 'red';
                      } else{
                          return 'black';
                      }
                  })
            }

            d3.csv('../iris.csv', rowConverter).then(function(d){
                dataset = d;
                buildParas();                
            });



     

          

        </script>
    </body>
</html>