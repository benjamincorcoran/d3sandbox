<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=800, initial-scale=1.0">
    <title>Paths</title>
    <script src="../d3.js"></script>
    <style>
        .line{
            fill:none;
            stroke:black;
            stroke-width:1px;
        }
    </style>
</head>
<body>
    <h1>Paths</h1>
    <svg id="svg"></svg>
    <script>
        var HEIGHT = 400;
        var WIDTH = 600;
        var PADDING = 30;

        // Load data 
        var parseCSV = function(d){
            var dateParser=d3.timeParse("%Y-%m")
            return {
                date: dateParser(d.Date),
                value: parseFloat(d.Price)
            }
        }

        var dataset;
        d3.csv("./monthly.csv", parseCSV).then(function(d){
            dataset = d;
            console.log(dataset);
            buildChart();
        })

        var buildChart = function(){

            var svg = d3.select("#svg")
                        .attr("width", WIDTH)
                        .attr("height", HEIGHT);

            // Create axes
            var xScale = d3.scaleTime()
                           .domain([d3.min(dataset,function(d){return d.date}),
                                    d3.max(dataset,function(d){return d.date})])
                           .range([PADDING, WIDTH-PADDING]);
            var yScale = d3.scaleLinear()
                           .domain([d3.min(dataset, function(d){return d.value}),
                                    d3.max(dataset,function(d){return d.value})])
                           .range([HEIGHT-PADDING, PADDING])
            
            var xAxis = d3.axisBottom()
                          .scale(xScale);

            var yAxis = d3.axisLeft()
                          .scale(yScale);

            svg.append("g")
               .attr("class","x axis")
               .attr("transform","translate(0,"+(HEIGHT-PADDING)+")")
               .call(xAxis);
            
            svg.append("g")
               .attr("class","y axis")
               .attr("transform","translate("+PADDING+",0)")
               .call(yAxis)



            var line = d3.line()
                         .x(function(d){return xScale(d.date)})
                         .y(function(d){return yScale(d.value)})

            svg.append("path")
               .datum(dataset)
               .attr("class","line")
               .attr("d", line)

            // Add points 

            // svg.append("g")
            //    .attr("id","points");

            // var circles = d3.select("#points")
            //                 .selectAll("circle")
            //                 .data(dataset)
            
            // circles.enter()
            //        .append("circle")
            //        .attr("cx", function(d){
            //            return xScale(d.date)
            //        })
            //        .attr("cy", function(d){
            //            return yScale(d.value)
            //        })
            //        .attr("r","1")
            //        .attr("fill","blue")

            

        }

    </script>
</body>
</html>